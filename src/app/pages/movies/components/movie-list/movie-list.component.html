<div class="ui checkbox" style="margin: 20px 0 10px 10px">
    <div class="ui icon input">
        <i class="search icon"></i>
        <!--        <input [(ngModel)]="searchPattern" placeholder="Search..." type="text">-->
        <input #searchPatter
               (input)="paginator.search(searchPatter.value)"
               label="Search key"
               placeholder="Search..."
               type="text">
    </div>
    <div class="ui mini buttons">
        <button (click)="setPreviewType('grid')" class="ui button">Grid</button>
        <div class="or"></div>
        <button (click)="setPreviewType('table')" class="ui button">Table</button>
    </div>
</div>
<ng-container *ngIf="previewType === 'table'">
    <div style="padding: 1em">
        <input [(ngModel)]="showExternalServices" id="idShowExternalServices" name="example" type="checkbox">
        <label for="idShowExternalServices">Zobraziť externé služby</label>
    </div>
    <ng-template #cellDirectors let-row="row">
        <button *ngFor="let director of row.directors" (click)="movieService.showMakerDetail(director.id)" mat-button>{{director.name}}</button>
    </ng-template>
    <ng-template #cellTitle let-row="row">
       <div style="display: flex; flex-direction: row">
           <img *ngIf="row.avatar"
                [src]="row.avatar"
                (click)="openImageDetail(row.avatar)"
                alt="row avatar" style="height: 42px; border-radius: 3px; margin-right: 1em; cursor: pointer">
           <div style="display: flex; flex-direction: column; justify-content: space-between;">
               <strong>{{row.titleSk || row.title}}</strong>
               <div *ngIf="row.titleSk" class="sub header">{{row.title}}</div>
           </div>
       </div>
    </ng-template>
    <ng-template #cellExternal let-row="row">
        <app-external-links type="movie" [holder]="row"></app-external-links>
    </ng-template>
    <ng-template #cellDetail let-row="row">
        <button (click)="movieService.showMovieDetail(row.id)" class="circular ui icon button hiddenable">
            <i class="icon angle right"></i>
        </button>
    </ng-template>
    <app-abstract-table [tableConfig]="movieConfig"
                        [templates]="{title: cellTitle, external: cellExternal, detail: cellDetail, directors: cellDirectors}"
                        [data]="movieData"></app-abstract-table>
</ng-container>


<ng-container *ngIf="previewType === 'grid'">
    <div class="grid-movies">
        <app-movie-poster-preview *ngFor="let movie of paginator.list | async | movieFilter: searchPattern"
                                  [movie]="movie"></app-movie-poster-preview>
    </div>
    <div style="text-align: center">
        <button (click)="paginator.loadNext()" class="next-loader" color="primary" mat-raised-button>Load next movies
        </button>
    </div>
</ng-container>
