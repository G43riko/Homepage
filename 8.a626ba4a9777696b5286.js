(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{o0vB:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("tk/3"),a=n("LRne"),o=n("JIr8"),c=(n("IYfF"),n("9nlD"),n("fXoL")),i=function(){function t(t,e,n,r){this.http=t,this._authService=e,this._notificationService=n,this.URL=r}return t.prototype.handleError=function(t,e){var n=this;return void 0===t&&(t="operation"),function(r){return n._notificationService.openErrorNotification(r),console.log(t+" failed: "+(r.message||r)),Object(a.a)(e)}},t.prototype.getDetail=function(t){return this.http.get(this.URL+"/"+t).pipe(Object(o.a)(this.handleError("getDetail")))},t.prototype.getList=function(t,e,n){return void 0===e&&(e=0),n?this.http.get(this.URL+"/quick-search/"+n+"?count="+t+"&offset="+e).pipe(Object(o.a)(this.handleError("search"))):this.http.get(this.URL+"/?count="+t+"&offset="+e).pipe(Object(o.a)(this.handleError("search")))},t.prototype.getHeaders=function(){var t=new r.h;return(t=(t=t.append("Content-type","application/json")).append("x-access-token",this._authService.getToken())).append("__auth_token__","3KJNUIHZobnkN3ZIa66ddsnsmvslDDD88d")},t.\u0275fac=function(t){c.bc()},t.\u0275prov=c.Kb({token:t,factory:t.\u0275fac}),t}()},vUrZ:function(t,e,n){"use strict";n.r(e),n.d(e,"FoodsModule",function(){return Ht});var r,a=n("krJt"),o=n("PCNd"),c=n("tyNb"),i=n("3Pt+"),s=n("2ChS"),u=n("eIep"),l=n("IzEk"),p=n("M1lw"),f=n("o0vB"),b=n("IYfF"),d=n("9nlD"),m=n("fXoL"),h=n("tk/3"),g=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},y=p.a.BASE_URL+"/feedback",I=function(t){function e(e,n,r){var a=t.call(this,e,n,r)||this;return a.authService=n,a}return g(e,t),e.prototype.sendFeedback=function(t){var e=this;return this.authService.user$.pipe(Object(u.a)(function(n){return e.http.post(y,v(v({},t),{user:n?n.uid:void 0}))}),Object(l.a)(1))},e.\u0275fac=function(t){return new(t||e)(m.Yb(h.c),m.Yb(b.a),m.Yb(d.a))},e.\u0275prov=m.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(f.a),w=n("kmnG"),O=n("qFsG"),k=n("bTqV"),T=n("sYmb"),D=function(){function t(t,e,n,r,a){void 0===r&&(r={}),this.bottomSheetRef=t,this.feedbackHttpService=e,this.notificationService=n,this.data=r,this.formBuilder=a,this.feedbackForm=this.createForm()}return t.prototype.submit=function(){var t=this;this.feedbackForm.disable(),this.feedbackHttpService.sendFeedback(this.feedbackForm.value).subscribe(function(e){t.bottomSheetRef.dismiss(),t.feedbackForm.enable(),t.feedbackForm.reset()},function(e){t.notificationService.openErrorNotification(e),t.feedbackForm.enable()})},t.prototype.createForm=function(){return this.formBuilder.group({screen:[{value:this.data.screen,disabled:!0}],message:["",i.u.required]})},t.\u0275fac=function(e){return new(e||t)(m.Ob(s.d),m.Ob(I),m.Ob(d.a),m.Ob(s.a),m.Ob(i.d))},t.\u0275cmp=m.Ib({type:t,selectors:[["app-feedback-dialog"]],decls:13,vars:13,consts:[[3,"formGroup"],[1,"full-width"],["formControlName","screen","matInput","",3,"placeholder"],["formControlName","message","matInput","","rows","5",3,"placeholder"],["color","primary","mat-raised-button","",3,"click"],["mat-raised-button","","type","button",3,"click"]],template:function(t,e){1&t&&(m.Ub(0,"form",0),m.Ub(1,"mat-form-field",1),m.Pb(2,"input",2),m.hc(3,"translate"),m.Tb(),m.Ub(4,"mat-form-field",1),m.Pb(5,"textarea",3),m.hc(6,"translate"),m.Tb(),m.Ub(7,"button",4),m.cc("click",function(){return e.submit()}),m.Ic(8),m.hc(9,"translate"),m.Tb(),m.Ub(10,"button",5),m.cc("click",function(){return e.bottomSheetRef.dismiss()}),m.Ic(11),m.hc(12,"translate"),m.Tb(),m.Tb()),2&t&&(m.mc("formGroup",e.feedbackForm),m.Db(2),m.nc("placeholder",m.ic(3,5,"shared.feedback.screen")),m.Db(3),m.nc("placeholder",m.ic(6,7,"shared.feedback.message")),m.Db(3),m.Jc(m.ic(9,9,"common.send")),m.Db(3),m.Jc(m.ic(12,11,"common.cancel")))},directives:[i.v,i.o,i.h,w.c,i.c,O.b,i.n,i.g,k.b],pipes:[T.c],styles:[""]}),t}(),M=n("LRne"),U=n("JIr8"),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=p.a.BASE_URL+"/menus/restaurant",_=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return S(e,t),e.prototype.getDailyMenuFor=function(t){return this.http.get(x+"/"+t).pipe(Object(U.a)(function(){return Object(M.a)(null)}))},e.\u0275fac=function(t){return new(t||e)(m.Yb(h.c),m.Yb(b.a),m.Yb(d.a))},e.\u0275prov=m.Kb({token:e,factory:e.\u0275fac}),e}(f.a),F=n("lJxs"),P=n("2Vo4"),C=function(){function t(){var t=this;this.coordinates=new P.a({}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.coordinates.next({latitude:e.coords.latitude,longitude:e.coords.longitude})},function(e){return t.coordinates.error(e)}):this.coordinates.error("Geolocation is not supported by this browser.")}return t.prototype.cleanUp=function(){this.id&&navigator.geolocation.clearWatch(this.id)},t.prototype.distanceAsync=function(t){var e=this;return t?this.coordinates.pipe(Object(F.a)(function(n){return n?e.calcCrow(Number(n.latitude),Number(n.longitude),Number(t.latitude),Number(t.longitude)):0})):Object(M.a)(0)},t.prototype.formatDistance=function(t){return t<1?(1e3*t).toFixed(0)+" m ":t.toFixed(2)+" km "},t.prototype.distanceFrom=function(t){return this.distance(t,this.coordinates.value)},t.prototype.distance=function(t,e){return t&&e?this.calcCrow(Number(e.latitude),Number(e.longitude),Number(t.latitude),Number(t.longitude)):0},t.prototype.calcCrow=function(t,e,n,r){var a=function(t){return t*Math.PI/180},o=a(n-t),c=a(r-e);t=a(t),n=a(n);var i=Math.sin(o/2)*Math.sin(o/2)+Math.sin(c/2)*Math.sin(c/2)*Math.cos(t)*Math.cos(n);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},t.\u0275prov=m.Kb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=p.a.BASE_URL+"/restaurants",L=function(t){function e(e,n,r,a,o){var c=t.call(this,r,a,o)||this;return c.geoLocationService=e,c.translateService=n,c.restaurants=c.loadRestaurants(),c}return R(e,t),e.prototype.openFoodImages=function(t){window.open(this.getGoogleImagesLinkFor(t),"_blank")},e.prototype.getDistance=function(t){var e=this.geoLocationService.distanceFrom(t);return this.geoLocationService.formatDistance(e)},e.prototype.getRestaurants=function(){return this.restaurants.pipe(Object(F.a)(function(t){return Object.values(t).map(function(t){return t.restaurant})}))},e.prototype.getWrappers=function(){return this.restaurants.pipe(Object(F.a)(function(t){return Object.values(t)}))},e.prototype.openHomepage=function(t){window.open(t.homepage,"__blank")},e.prototype.getRestaurantByKey=function(t){return this.restaurants.pipe(Object(F.a)(function(e){return e[t].restaurant}),Object(U.a)(function(){return Object(M.a)(null)}))},e.prototype.getGoogleImagesLinkFor=function(t){return"https://www.google.sk/search?q="+encodeURIComponent(t)+"&tbm=isch"},e.prototype.loadRestaurants=function(){var t=this;return this.geoLocationService.coordinates.pipe(Object(u.a)(function(e){return t.http.get(j+"/byDistance?latitude="+e.latitude+"&longitude="+e.longitude).pipe(Object(U.a)(t.handleError("getRestaurants")),Object(F.a)(function(t){var e={};return t.filter(function(t){return t.restaurant.key}).forEach(function(t){e[t.restaurant.key]=t}),e}))}))},e.\u0275fac=function(t){return new(t||e)(m.Yb(C),m.Yb(T.d),m.Yb(h.c),m.Yb(b.a),m.Yb(d.a))},e.\u0275prov=m.Kb({token:e,factory:e.\u0275fac}),e}(f.a),G=n("/t3+"),H=n("NFeN"),N=n("ofXK"),A=n("Qu3c"),E=n("XhcP"),K=n("MutI"),J=n("Xa2L"),$=function(){function t(){}return t.prototype.transform=function(t,e){if(!e)return t;var n=e.toLowerCase().trim();return t.filter(function(t){return!(!t.restaurant.key||!t.restaurant.key.toLowerCase().includes(n))||t.restaurant.name&&t.restaurant.name.toLowerCase().includes(n)})},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Nb({name:"searchRestaurant",type:t,pure:!0}),t}();function Y(t,e){1&t&&(m.Ub(0,"div",10),m.Pb(1,"mat-spinner"),m.Tb())}function z(t,e){if(1&t&&(m.Ub(0,"mat-list-option",11),m.Ic(1),m.Ub(2,"small",12),m.Ic(3),m.Tb(),m.Tb()),2&t){var n=e.$implicit,r=m.gc().ngIf,a=m.gc();m.mc("selected",a.isSelected(n.restaurant,r))("value",n.restaurant.key),m.Db(1),m.Kc(" ",n.restaurant.name," "),m.Db(2),m.Jc(a.getFormattedDistance(n.distance))}}function B(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",2),m.Gc(1,Y,2,0,"div",3),m.Ub(2,"mat-form-field",4),m.Pb(3,"input",5,6),m.hc(5,"translate"),m.Ub(6,"mat-icon",7),m.Ic(7,"search"),m.Tb(),m.Tb(),m.Ub(8,"mat-selection-list",8),m.cc("selectionChange",function(t){m.xc(n);var r=e.ngIf;return m.gc().change(t,r)}),m.Gc(9,z,4,4,"mat-list-option",9),m.hc(10,"searchRestaurant"),m.Tb(),m.Tb()}if(2&t){var r=m.vc(4),a=m.gc();m.Db(1),m.mc("ngIf",a.loading),m.Db(2),m.nc("placeholder",m.ic(5,3,"common.search")),m.Db(6),m.mc("ngForOf",m.jc(10,5,a.allRestaurants,r.value))}}function V(t,e){if(1&t&&(m.Ub(0,"mat-list-option"),m.Ic(1),m.Ub(2,"small",12),m.Ic(3),m.Tb(),m.Tb()),2&t){var n=e.$implicit,r=m.gc(2);m.Db(1),m.Kc(" ",n.restaurant.name," "),m.Db(2),m.Jc(r.getFormattedDistance(n.distance))}}function q(t,e){if(1&t&&(m.Ub(0,"div",2),m.Ub(1,"mat-selection-list",13),m.Gc(2,V,4,2,"mat-list-option",14),m.Tb(),m.Tb()),2&t){var n=m.gc();m.Db(1),m.mc("disabled",!0),m.Db(1),m.mc("ngForOf",n.allRestaurants)}}var X=function(){function t(t,e,n,r){this.geoLocationService=t,this.restaurantHttpService=e,this.translateService=n,this.authService=r,this.loading=!1,this.allRestaurants=[]}return t.prototype.getFormattedDistance=function(t){return t?this.geoLocationService.formatDistance(t):this.translateService.instant("shared.unknownDistance")},t.prototype.ngOnInit=function(){var t=this;this.restaurantHttpService.getWrappers().pipe(Object(u.a)(function(e){return t.allRestaurants=e,t.authService.user$})).subscribe(function(e){var n;if(t.selectionList.deselectAll(),e&&Array.isArray(e.favoriteRestaurants)){var r=e.favoriteRestaurants;(n=t.selectionList.selectedOptions).select.apply(n,t.selectionList.options.filter(function(t){return r.includes(t.value)}))}})},t.prototype.isSelected=function(t,e){return Boolean(t.key&&Array.isArray(e.favoriteRestaurants)&&e.favoriteRestaurants.includes(t.key))},t.prototype.change=function(t,e){var n=this;this.loading=!0,this.authService.updateFavouriteRestaurant(e,t.option.value,t.option.selected?"add":"remove").subscribe(function(){n.loading=!1})},t.\u0275fac=function(e){return new(e||t)(m.Ob(C),m.Ob(L),m.Ob(T.d),m.Ob(b.a))},t.\u0275cmp=m.Ib({type:t,selectors:[["app-restaurant-selector"]],viewQuery:function(t,e){var n;1&t&&m.Mc(K.i,1),2&t&&m.uc(n=m.dc())&&(e.selectionList=n.first)},decls:4,vars:4,consts:[["class","restaurant-selector-wrapper",4,"ngIf","ngIfElse"],["onlyRestaurantList",""],[1,"restaurant-selector-wrapper"],["class","loader-wrapper",4,"ngIf"],[2,"padding","0 0.5rem 0 0.5rem","box-shadow","0 0 5px rgba(0, 0, 0, 0.4)","height","60px"],["matInput","",3,"placeholder"],["searchRestaurant",""],["matSuffix",""],[3,"selectionChange"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"loader-wrapper"],[3,"selected","value"],[2,"font-size","11px"],[3,"disabled"],[4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(m.Gc(0,B,11,8,"div",0),m.hc(1,"async"),m.Gc(2,q,3,2,"ng-template",null,1,m.Hc)),2&t){var n=m.vc(3);m.mc("ngIf",m.ic(1,2,e.authService.user$))("ngIfElse",n)}},directives:[N.m,w.c,O.b,H.a,w.h,K.i,N.l,J.b,K.f],pipes:[N.b,T.c,$],styles:[".restaurant-selector-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;height:100%;-ms-flex-direction:column;flex-direction:column}.restaurant-selector-wrapper[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{overflow:auto}.loader-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:-ms-flexbox;display:flex;background:rgba(0,0,0,.2);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;z-index:2}"]}),t}(),W=n("j2Vq"),Z=n("o7GM"),Q=n("GlzI"),tt=n("Y0mc"),et=n("0IaG"),nt=n("FKr1"),rt=n("sDCv"),at=n("bv9b"),ot='<span class="searched">',ct=new RegExp("("+ot+"|</span>)","g"),it=function(){function t(){}return t.prototype.transform=function(t,e){if(!t)return[null];if(t.forEach(function(t){return t.name&&(t.name=t.name.replace(ct,""))}),!e)return t;var n=Z.StringUtils.removeAccentedCharacters(e.toLowerCase()),r=t.filter(function(t){var e=Z.StringUtils.removeAccentedCharacters(t.name.toLowerCase()).indexOf(n);return e>=0&&(t.nameHTML=t.name.substr(0,e)+ot+t.name.substr(e,n.length)+"</span>"+t.name.substr(e+n.length,t.name.length-(e+n.length))),e>=0});return r.length>0?r:[null]},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Nb({name:"searchFoodPipe",type:t,pure:!0}),t}();function st(t,e){if(1&t){var n=m.Vb();m.Ub(0,"button",5),m.cc("click",function(){m.xc(n);var t=m.gc(2);return t.showMap(t.restaurant)}),m.hc(1,"translate"),m.Ub(2,"mat-icon"),m.Ic(3,"place"),m.Tb(),m.Tb()}2&t&&m.nc("matTooltip",m.ic(1,1,"shared.showMap"))}function ut(t,e){if(1&t){var n=m.Vb();m.Ub(0,"button",5),m.cc("click",function(){m.xc(n);var t=m.gc(2);return t.restaurantHttpService.openHomepage(t.restaurant)}),m.hc(1,"translate"),m.Ub(2,"mat-icon"),m.Ic(3,"home"),m.Tb(),m.Tb()}2&t&&m.nc("matTooltip",m.ic(1,1,"foods.showHomePage"))}function lt(t,e){if(1&t&&(m.Ub(0,"h2",2),m.Ub(1,"span"),m.Ic(2),m.Tb(),m.Ub(3,"small",3),m.Ic(4),m.hc(5,"translate"),m.Tb(),m.Gc(6,st,4,3,"button",4),m.Gc(7,ut,4,3,"button",4),m.Tb()),2&t){var n=m.gc();m.Db(1),m.Gb("searched",n.restaurantMatch),m.Db(1),m.Jc(n.restaurant.name),m.Db(2),m.Lc(" ",n.restaurantHttpService.getDistance(n.restaurant.address)," ",m.ic(5,7,"foods.fromYou"),""),m.Db(2),m.mc("ngIf",n.restaurant.address),m.Db(1),m.mc("ngIf",n.restaurant.homepage)}}function pt(t,e){if(1&t){var n=m.Vb();m.Ub(0,"button",9),m.cc("click",function(){m.xc(n);var t=m.gc(2);return t.restaurantHttpService.openHomepage(t.restaurant)}),m.Ic(1),m.hc(2,"translate"),m.Tb()}2&t&&(m.Db(1),m.Jc(m.ic(2,1,"foods.tryHomepage")))}function ft(t,e){if(1&t&&(m.Ub(0,"mat-list-item"),m.Ub(1,"small",6),m.Ub(2,"span",7),m.Ic(3),m.hc(4,"translate"),m.Tb(),m.Gc(5,pt,3,3,"button",8),m.Tb(),m.Tb()),2&t){var n=m.gc();m.Db(3),m.Kc("",m.ic(4,2,"foods.cannotGetDailyMenu"),"."),m.Db(2),m.mc("ngIf",n.restaurant.homepage)}}function bt(t,e){if(1&t){var n=m.Vb();m.Ub(0,"button",9),m.cc("click",function(){m.xc(n);var t=m.gc(3);return t.restaurantHttpService.openHomepage(t.restaurant)}),m.Ic(1),m.hc(2,"translate"),m.Tb()}2&t&&(m.Db(1),m.Jc(m.ic(2,1,"foods.tryHomepage")))}function dt(t,e){if(1&t&&(m.Ub(0,"mat-list-item"),m.Ub(1,"small",6),m.Ub(2,"span",7),m.Ic(3),m.hc(4,"translate"),m.Tb(),m.Gc(5,bt,3,3,"button",8),m.Tb(),m.Ic(6,". "),m.Tb()),2&t){var n=m.gc(2);m.Db(3),m.Kc("",m.ic(4,2,"foods.restaurantHasNoPublicMenu"),"."),m.Db(2),m.mc("ngIf",n.restaurant.homepage)}}var mt=function(t){return[t]};function ht(t,e){if(1&t&&m.Pb(0,"app-icon-list",18),2&t){var n=m.gc(2).$implicit;m.mc("keys",m.qc(1,mt,n.type))}}function gt(t,e){if(1&t){var n=m.Vb();m.Ub(0,"button",19),m.cc("click",function(){m.xc(n);var t=m.gc(2).$implicit;return m.gc(2).restaurantHttpService.openFoodImages(t.name)}),m.hc(1,"translate"),m.Ub(2,"mat-icon"),m.Ic(3,"image"),m.Tb(),m.Tb()}2&t&&m.nc("matTooltip",m.ic(1,1,"foods.showDishImages"))}function vt(t,e){if(1&t&&m.Pb(0,"h4",20),2&t){var n=m.gc(2).$implicit,r=m.gc(2);m.mc("innerHTML",!r.restaurantMatch&&r.localSearchedMath&&n.nameHTML||n.name,m.yc)}}function yt(t,e){if(1&t&&(m.Ub(0,"h4",21),m.Ub(1,"strong"),m.Ic(2),m.Tb(),m.Tb()),2&t){var n=m.gc(2).$implicit;m.Db(2),m.Jc(n.name)}}function It(t,e){if(1&t&&(m.Ub(0,"span",22),m.Ic(1),m.Tb()),2&t){var n=m.gc(2).$implicit;m.Db(1),m.Jc(n.price)}}function wt(t,e){if(1&t&&(m.Ub(0,"span",22),m.Ic(1),m.Tb()),2&t){var n=m.gc(2).$implicit;m.Db(1),m.Jc(n.weight)}}function Ot(t,e){if(1&t&&(m.Ub(0,"mat-list-item"),m.Gc(1,ht,1,3,"app-icon-list",13),m.Gc(2,gt,4,3,"button",14),m.Gc(3,vt,1,1,"h4",15),m.Gc(4,yt,3,1,"ng-template",null,16,m.Hc),m.Gc(6,It,2,1,"span",17),m.Gc(7,wt,2,1,"span",17),m.Tb()),2&t){var n=m.vc(5),r=m.gc().$implicit;m.Gb("hoverable",r&&"special"!==r.type),m.Db(1),m.mc("ngIf","special"!==r.type),m.Db(1),m.mc("ngIf","special"!==r.type),m.Db(1),m.mc("ngIf","special"!==r.type)("ngIfElse",n),m.Db(3),m.mc("ngIf",r.price),m.Db(1),m.mc("ngIf",r.weight)}}function kt(t,e){1&t&&(m.Ub(0,"mat-list-item"),m.Ub(1,"h4",21),m.Ic(2),m.hc(3,"translate"),m.Tb(),m.Tb()),2&t&&(m.Db(2),m.Jc(m.ic(3,1,"shared.noFilterResults")))}function Tt(t,e){if(1&t&&m.Gc(0,kt,4,3,"mat-list-item",1),2&t){var n=m.gc(3);m.mc("ngIf",n.dailyMenu.dishes.length)}}function Dt(t,e){if(1&t&&(m.Sb(0),m.Gc(1,Ot,8,8,"mat-list-item",11),m.Gc(2,Tt,1,1,"ng-template",null,12,m.Hc),m.Rb()),2&t){var n=e.$implicit,r=m.vc(3);m.Db(1),m.mc("ngIf",n)("ngIfElse",r)}}function Mt(t,e){if(1&t&&(m.Sb(0),m.Gc(1,dt,7,4,"mat-list-item",1),m.Gc(2,Dt,4,2,"ng-container",10),m.hc(3,"searchFoodPipe"),m.Rb()),2&t){var n=m.gc();m.Db(1),m.mc("ngIf",!n.dailyMenu.dishes.length),m.Db(1),m.mc("ngForOf",n.restaurantMatch?n.dailyMenu.dishes:m.jc(3,2,n.dailyMenu.dishes,n.localSearchedMath))}}function Ut(t,e){1&t&&(m.Ub(0,"mat-list-item"),m.Pb(1,"mat-progress-bar",23),m.Tb())}var St=function(){function t(t,e,n,r,a){this.dailyMenuHttpService=t,this.restaurantHttpService=e,this.changeDetectorRef=n,this.mapService=r,this.dialog=a,this.loading=!1,this.restaurantMatch=!1}return Object.defineProperty(t.prototype,"searchedFood",{set:function(t){this.localSearchedMath=t,this.restaurantMatch=this.isRestaurantMatch(),this.changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),t.prototype.isRestaurantMatch=function(){if(!this.restaurant||!this.localSearchedMath||this.localSearchedMath.length<3)return!1;var t=Z.StringUtils.removeAccentedCharacters(this.localSearchedMath.toLowerCase());return Z.StringUtils.removeAccentedCharacters(this.restaurant.name).toLowerCase().indexOf(t)>=0||Z.StringUtils.removeAccentedCharacters(this.restaurant.key).toLowerCase().indexOf(t)>=0},Object.defineProperty(t.prototype,"restaurantKey",{set:function(t){var e=this;t&&(this.loading=!0,this.restaurantHttpService.getRestaurantByKey(t).pipe(Object(u.a)(function(n){return n?(e.restaurant=n,e.dailyMenuHttpService.getDailyMenuFor(t)):Object(M.a)(null)})).subscribe(function(t){e.dailyMenu=t,e.loading=!1}))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.showMap=function(t){t.address&&this.dialog.open(Q.a,{width:"95%",height:"95%",data:this.mapService.getLocationEmbedUrlFromLatAndLong(Number(t.address.latitude),Number(t.address.longitude))})},t.prototype.getIconByType=function(t){switch(t){case"pizza":return"local_pizza";case"burger":return"hamburger";case"fish":return"fish";case"salad":return"salad";default:return"restaurant"}},t.\u0275fac=function(e){return new(e||t)(m.Ob(_),m.Ob(L),m.Ob(m.h),m.Ob(tt.a),m.Ob(et.b))},t.\u0275cmp=m.Ib({type:t,selectors:[["app-restaurant-row"]],inputs:{searchedFood:"searchedFood",restaurantKey:"restaurantKey"},decls:4,vars:4,consts:[["mat-subheader","","style","position: sticky;top: 0;background: #fafafa;z-index:1",4,"ngIf"],[4,"ngIf"],["mat-subheader","",2,"position","sticky","top","0","background","#fafafa","z-index","1"],[2,"margin-left","16px"],["mat-icon-button","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-line","",1,"centered-vertically",2,"display","flex","flex-wrap","wrap"],[2,"padding","0 16px"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"hoverable",4,"ngIf","ngIfElse"],["noFilterResults",""],["defaultIcon","restaurant","mat-list-icon","","type","food",3,"keys",4,"ngIf"],["style","order:2","mat-icon-button","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-line","",3,"innerHTML",4,"ngIf","ngIfElse"],["showTitle",""],["class","additional-info",4,"ngIf"],["defaultIcon","restaurant","mat-list-icon","","type","food",3,"keys"],["mat-icon-button","","color","primary",2,"order","2",3,"matTooltip","click"],["mat-line","",3,"innerHTML"],["mat-line",""],[1,"additional-info"],["mode","indeterminate"]],template:function(t,e){1&t&&(m.Gc(0,lt,8,9,"h2",0),m.Gc(1,ft,6,4,"mat-list-item",1),m.Gc(2,Mt,4,5,"ng-container",1),m.Gc(3,Ut,2,0,"mat-list-item",1)),2&t&&(m.mc("ngIf",e.restaurant),m.Db(1),m.mc("ngIf",null===e.dailyMenu),m.Db(1),m.mc("ngIf",e.dailyMenu),m.Db(1),m.mc("ngIf",e.loading))},directives:[N.m,K.g,k.b,A.a,H.a,K.d,nt.j,N.l,rt.a,K.c,at.a],pipes:[T.c,it],styles:[".hoverable[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.additional-info[_ngcontent-%COMP%]{-ms-flex-order:1;order:1;white-space:nowrap;margin:0 1em}@media only screen and (max-width:767px){.additional-info[_ngcontent-%COMP%]{margin:0 .1em}}.centered-vertically[_ngcontent-%COMP%]{display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:bolder}"]}),t}(),xt=n("f0Cb");function _t(t,e){1&t&&(m.Ub(0,"span",14),m.Ic(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Db(1),m.Kc(" ",m.ic(2,1,"foods.forSpecificRestaurantsClickOn")," "))}function Ft(t,e){1&t&&m.Pb(0,"app-login-screen")}function Pt(t,e){1&t&&m.Pb(0,"mat-divider")}function Ct(t,e){if(1&t&&(m.Sb(0),m.Gc(1,Pt,1,0,"mat-divider",9),m.Pb(2,"app-restaurant-row",17),m.Rb()),2&t){var n=e.$implicit,r=e.index;m.gc(2);var a=m.vc(5);m.Db(1),m.mc("ngIf",r>0),m.Db(1),m.mc("searchedFood",a.value)("restaurantKey",n)}}function Rt(t,e){1&t&&(m.Ub(0,"span",14),m.Ic(1),m.hc(2,"translate"),m.Ub(3,"mat-icon"),m.Ic(4,"menu"),m.Tb(),m.Tb()),2&t&&(m.Db(1),m.Kc(" ",m.ic(2,1,"foods.forRestaurantSelectionClickOn")," "))}function jt(t,e){if(1&t&&(m.Ub(0,"mat-sidenav-content"),m.Ub(1,"mat-list",15),m.Gc(2,Ct,3,3,"ng-container",16),m.Tb(),m.Gc(3,Rt,5,3,"span",7),m.Tb()),2&t){var n=m.gc();m.Dc("min-height",n.minHeight),m.Db(2),m.mc("ngForOf",n.selectedRestaurants),m.Db(1),m.mc("ngIf",n.selectedRestaurants&&0===n.selectedRestaurants.length)}}var Lt=[{path:"",children:[{path:"",pathMatch:"full",component:function(){function t(t,e,n,r){this.dailyMenuHttpService=t,this.bottomSheet=e,this.restaurantHttpService=n,this.authService=r,this.standAlone=!1}return Object.defineProperty(t.prototype,"minHeight",{get:function(){return"calc(100vh - "+(this.standAlone?64:128)+"px)"},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.authService.user$.subscribe(function(e){e?t.selectedRestaurants=e.favoriteRestaurants||[]:t.restaurantHttpService.getRestaurants().subscribe(function(e){t.selectedRestaurants=e.map(function(t){return t.key+""})})})},t.prototype.openFeedback=function(){this.bottomSheet.open(D,{data:{screen:"Foods"}})},t.\u0275fac=function(e){return new(e||t)(m.Ob(_),m.Ob(s.b),m.Ob(L),m.Ob(b.a))},t.\u0275cmp=m.Ib({type:t,selectors:[["app-overview"]],decls:27,vars:14,consts:[[1,"wrapper"],["color","primary"],[2,"height","100%"],["matInput","",3,"placeholder"],["searchFood",""],["matSuffix",""],[1,"divider"],["class","one-row-warning",4,"ngIf"],["mat-icon-button","",3,"matTooltip","click"],[4,"ngIf"],[1,"example-sidenav-container"],["mode","over","fixedTopGap","56","position","end"],["snav",""],[3,"min-height",4,"ngIf"],[1,"one-row-warning"],[2,"width","fit-content","max-width","100%","margin","0 auto"],[4,"ngFor","ngForOf"],[3,"searchedFood","restaurantKey"]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Ub(1,"mat-toolbar",1),m.Ub(2,"mat-toolbar-row"),m.Ub(3,"mat-form-field",2),m.Pb(4,"input",3,4),m.hc(6,"translate"),m.Ub(7,"mat-icon",5),m.Ic(8,"search"),m.Tb(),m.Tb(),m.Pb(9,"span",6),m.Gc(10,_t,3,3,"span",7),m.hc(11,"async"),m.Pb(12,"span",6),m.Ub(13,"button",8),m.cc("click",function(){return m.xc(n),m.vc(24).toggle()}),m.hc(14,"translate"),m.Ub(15,"mat-icon"),m.Ic(16,"menu"),m.Tb(),m.Tb(),m.Ub(17,"button",8),m.cc("click",function(){return e.openFeedback()}),m.hc(18,"translate"),m.Ub(19,"mat-icon"),m.Ic(20,"feedback"),m.Tb(),m.Tb(),m.Gc(21,Ft,1,0,"app-login-screen",9),m.Tb(),m.Tb(),m.Ub(22,"mat-sidenav-container",10),m.Ub(23,"mat-sidenav",11,12),m.Pb(25,"app-restaurant-selector"),m.Tb(),m.Gc(26,jt,4,4,"mat-sidenav-content",13),m.Tb(),m.Tb()}2&t&&(m.Db(4),m.nc("placeholder",m.ic(6,6,"common.search")),m.Db(6),m.mc("ngIf",!m.ic(11,8,e.authService.user$)),m.Db(3),m.nc("matTooltip",m.ic(14,10,"foods.restaurantSelection")),m.Db(4),m.nc("matTooltip",m.ic(18,12,"shared.feedbackPanel")),m.Db(4),m.mc("ngIf",e.standAlone),m.Db(5),m.mc("ngIf",e.authService.user$))},directives:[G.a,G.c,w.c,O.b,H.a,w.h,N.m,k.b,A.a,E.b,E.a,X,W.a,E.c,K.a,N.l,St,xt.a],pipes:[T.c,N.b],styles:[".wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}@media only screen and (max-width:1024px){.wrapper[_ngcontent-%COMP%]   mat-toolbar-row[_ngcontent-%COMP%]{font-size:17px}.wrapper[_ngcontent-%COMP%]   mat-toolbar-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:120px}}@media only screen and (max-width:724px){.wrapper[_ngcontent-%COMP%]   mat-toolbar-row[_ngcontent-%COMP%]{font-size:14px}.wrapper[_ngcontent-%COMP%]   mat-toolbar-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:80px}}.one-row-warning[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin-left:1rem;-ms-flex-align:center;align-items:center}"]}),t}()}]}],Gt=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({imports:[[c.k.forChild(Lt)],c.k]}),t}(),Ht=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({providers:[L,_],imports:[[o.a,Gt,a.a]]}),t}()}}]);