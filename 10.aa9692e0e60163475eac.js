(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"ja7+":function(e,t,n){"use strict";n.r(t),n.d(t,"AnalyzerModule",function(){return L});var o=n("ofXK"),r=n("3Pt+"),i=n("NA4g"),a=n("PCNd"),s=n("tyNb"),c=n("fXoL"),l=function(){function e(){this.red=new Array(255),this.green=new Array(255),this.blue=new Array(255),this.alpha=new Array(255);for(var e=0;e<256;e++)this.red[e]=0,this.green[e]=0,this.blue[e]=0,this.alpha[e]=0}return Object.defineProperty(e.prototype,"average",{get:function(){for(var e=new Array(255),t=0;t<256;t++)e[t]=(this.red[t]+this.green[t]+this.blue[t])/3;return e},enumerable:!1,configurable:!0}),e}();function u(e,t,n,o,r){void 0===r&&(r="#FFFFFF");var i=document.createElement("canvas");i.width=t,i.height=n;var a=Math.max.apply(Math,e),s=i.getContext("2d");s.fillStyle=r,s.fillRect(0,0,t,n),s.fillStyle=o;for(var c=n/a,l=t/255,u=0;u<t;u++){var p=e[u]*c;s.fillRect(u*l,n-p,l,p)}return i}var p=function(){function e(){}return e.prototype.generateImageHistogram=function(e,t,n,o){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");i.drawImage(e,0,0);for(var a=i.getImageData(0,0,e.width,e.height).data,s=new l,c=0;c<a.length;)s.red[a[c++]]++,s.green[a[c++]]++,s.blue[a[c++]]++,s.alpha[a[c++]]++;switch(o){case"red":return u(s.red,t,n,"red");case"green":return u(s.green,t,n,"green");case"blue":return u(s.blue,t,n,"blue");case"alpha":return u(s.alpha,t,n,"gray");default:return u(s.average,t,n,"black")}},e.prototype.generateAudioHistogram=function(e,t,n,o){var r,i;return void 0===o&&(o=70),function(e,t,n,o,r){void 0===r&&(r="#FFFFFF");var i=document.createElement("canvas");i.width=t,i.height=n;var a=Math.max.apply(Math,e),s=i.getContext("2d");s.fillStyle=r,s.fillRect(0,0,t,n),s.imageSmoothingEnabled=!1,s.fillStyle="#000000";for(var c=n/a,l=t/e.length,u=0;u<t;u++){var p=e[u]*c;s.fillRect(u*l+1,n-p,l-2,p)}return console.log("data: ",e),i}((r=function(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/o),r=[],i=0;i<o;i++){for(var a=n*i,s=0,c=0;c<n;c++)s+=Math.abs(t[a+c]);r.push(s/n)}return r}(e),i=Math.pow(Math.max.apply(Math,r),-1),r.map(function(e){return e*i})),t,n)},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),f=function(){function e(e){this.histogramGeneratorService=e}return e.prototype.processAudio=function(e){var t=this,n=[],o=new FileReader,r=document.createElement("audio");r.src=URL.createObjectURL(e),r.style.width="100%",r.controls=!0;var i=[r];return new Promise(function(a,s){r.onloadeddata=function(){o.onload=function(){return e=t,void 0,c=function(){var e,t;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(s){switch(s.label){case 0:return[4,(new AudioContext).decodeAudioData(o.result)];case 1:return e=s.sent(),(t=this.histogramGeneratorService.generateAudioHistogram(e,window.innerWidth,200,200)).style.maxWidth="100%",t.style.height="calc(100% - 62px)",i.push(t),n.push({key:"Audio data",type:"divider"}),n.push({key:"Channels",value:e.numberOfChannels}),n.push({key:"Sample rate",value:e.sampleRate}),n.push({key:"Duration",value:r.duration+" s"}),n.push({key:"Text tracks",value:r.textTracks&&r.textTracks.length||0}),n.push({key:"Audio tracks",value:r.getAudioTracks&&r.getAudioTracks().length||0}),a({infos:n,previewContent:i}),[2]}})},new((s=void 0)||(s=Promise))(function(t,n){function o(e){try{i(c.next(e))}catch(t){n(t)}}function r(e){try{i(c.throw(e))}catch(t){n(t)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s(function(e){e(n)})).then(o,r)}i((c=c.apply(e,[])).next())});var e,s,c},o.readAsArrayBuffer(e)}})},e.\u0275fac=function(t){return new(t||e)(c.Yb(p))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac}),e}(),d=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},h=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(){function e(e){this.histogramGeneratorService=e}return e.prototype.getExifData=function(e){return d(this,void 0,void 0,function(){var t=this;return h(this,function(o){return[2,new Promise(function(o,r){return d(t,void 0,void 0,function(){var t;return h(this,function(i){switch(i.label){case 0:return[4,n.e(15).then(n.t.bind(null,"b0Xh",7))];case 1:return(t=i.sent()).getData(e,function(){var e=t.getAllTags(this),n=function(e){return{key:e[0],value:e[1]}},r=Object.entries(e).filter(function(e){return"thumbnail"!==e[0]}).map(n),i=e.thumbnail;i&&(r.push({type:"divider"}),r.push.apply(r,Object.entries(i).filter(function(e){return"blob"!==e[0]}).map(n))),o(r)})||r([]),[2]}})})})]})})},e.prototype.processImage=function(e){var t=this,n=[],o=[],r=document.createElement("img");return new Promise(function(i,a){r.onload=function(){return d(t,void 0,void 0,function(){var e,t,a=this;return h(this,function(c){switch(c.label){case 0:return n.push({key:"Image data",type:"divider"}),n.push({key:"Width",value:r.naturalWidth+" px"}),n.push({key:"Height",value:r.naturalHeight+" px"}),[4,this.getExifData(r)];case 1:return(e=c.sent())&&n.push.apply(n,e),(t=function(e){var t=a.histogramGeneratorService.generateImageHistogram(r,400,100,e);t.style.maxWidth="100%",t.style.border="3px solid black",o.push(t)})("red"),t("green"),t("blue"),t("avg"),i({infos:n,histograms:o,previewContent:[s]}),[2]}})})};var s=document.createElement("div");s.className="image-wrapper",s.append(r),r.src=URL.createObjectURL(e)})},e.prototype.processSvg=function(e){var t=new FileReader;return new Promise(function(n,o){t.onload=function(){var e=document.createElement("div");e.innerHTML=t.result,e.style.stroke="black",e.style.fill="blue",n({previewContent:[e]})},t.readAsText(e)})},e.\u0275fac=function(t){return new(t||e)(c.Yb(p))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac}),e}(),m=n("HDdC"),v=function(){function e(){}return e.prototype.processMapFilePromise=function(e){return this.processMapFile(e).toPromise()},e.prototype.processMapFile=function(e){var t=this,n=new FileReader;return new m.a(function(o){n.onload=function(){o.next(t.createGpxMap(n.result)),o.complete()},n.onerror=o.error,n.readAsText(e)})},e.prototype.createMap=function(e){var t=document.createElement("div");t.style.position="relative",t.style.width="100%",t.style.height="100%",e&&t.setAttribute("id",e);var n=document.createElement("div");return n.style.position="relative",n.style.width="100%",n.style.height="100%",n.append(t),n},e.prototype.createGpxMap=function(e,t){void 0===t&&(t="MAP_ID");var n=this.createMap(t),o=(new DOMParser).parseFromString(e,"text/xml");mapboxgl.accessToken="pk.eyJ1IjoiZzQzcmlrbyIsImEiOiJjam14dGNreDcxYjBqM3ZvMjk1MDNhcnhkIn0.b6BmzCbtHQNg6hfRA4uzWQ";var r=Array.from(o.querySelectorAll("trk")).map(function(e){var t,n;return{name:null===(t=e.querySelector("name"))||void 0===t?void 0:t.textContent,time:null===(n=e.querySelector("time"))||void 0===n?void 0:n.textContent,segments:Array.from(e.querySelectorAll("trkseg")).map(function(e){var t=1/0,n=-1/0,o=1/0,r=-1/0,i=1/0,a=-1/0,s=Array.from(e.querySelectorAll("trkpt")).map(function(e){var s,c,l=parseFloat(e.getAttribute("lat")),u=parseFloat(e.getAttribute("lon")),p=parseFloat((null===(s=e.querySelector("ele"))||void 0===s?void 0:s.textContent)||"0");return t=Math.min(t,l),n=Math.max(n,l),o=Math.min(o,u),r=Math.max(r,u),i=Math.min(i,p),a=Math.max(a,p),{lat:l,long:u,elevation:p,time:null===(c=e.querySelector("time"))||void 0===c?void 0:c.textContent}}),c=s.map(function(e){return[e.long,e.lat]}),l=turf.lineString(c),u=new Date(s[s.length-1].time).getTime()-new Date(s[0].time).getTime(),p=[],f=36e5;return u>f&&p.push(Math.floor(u/f)+"h"),u%f>6e4&&p.push(Math.round(u%f/6e4)+"min"),{minEl:i,maxEl:a,points:s,mapBoxPoints:c,duration:p.join(" "),length:turf.length(l,{units:"kilometers"}).toFixed(2),bounds:[[o,t],[r,n]]}})}});return{previewContent:[n],infos:[{key:"Map details",type:"divider"},{key:"Points",value:r[0].segments[0].points.length},{key:"Distance",value:r[0].segments[0].length+" km"},{key:"Duration",value:r[0].segments[0].duration},{key:"Elevation",value:"min: "+r[0].segments[0].minEl+", max: "+r[0].segments[0].maxEl},{key:"Name",value:r[0].name||"Run"},{key:"Time",value:r[0].time||"Unknown"}],afterAddCallback:function(){var e=new mapboxgl.Map({container:t,style:"mapbox://styles/mapbox/streets-v11",bounds:r[0].segments[0].bounds,fitBoundsOptions:{padding:10}});e.on("load",function(){e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r[0].segments[0].mapBoxPoints}}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":8}})})}}},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),b=function(e,t){var n=t.prefix,o=t.suffix,r=void 0===o?"":o,i=t.flags,a=void 0===i?"g":i;return new RegExp((void 0===n?"":n)+"("+e.join("|")+")"+r,a)},y={docker:[{match:b(["FROM","WORKDIR","COPY","RUN","ENV","USER","EXPOSE","CMD"],{prefix:"^",flags:"gmi"}),color:"#ff0000"},{match:/\d+\.\d+\.\d+/g,color:"#0000ff"},{match:/^#.*$/gm,mapFunction:function(e){return'<span class="comment">'+e+"</span>"}}],markdown:[{match:/[<>]/gm,mapFunction:function(e){switch(e){case"<":return"&lt";case">":return"&gt";default:return e}}},{match:/^\s*#{1}\s(.*$)/gm,mapFunction:function(e,t){return"<h1>"+t+"</h1>"}},{match:/^\s*#{2}\s(.*$)/gim,mapFunction:function(e,t){return"<h2>"+t+"</h2>"}},{match:/^\s*#{3}\s(.*$)/gim,mapFunction:function(e,t){return"<h3>"+t+"</h3>"}},{match:/^\s*#{4}\s(.*$)/gim,mapFunction:function(e,t){return"<h4>"+t+"</h4>"}},{match:/^\s*#{5}\s(.*$)/gim,mapFunction:function(e,t){return"<h5>"+t+"</h5>"}},{match:/^\s*#{6}\s(.*$)/gim,mapFunction:function(e,t){return"<h6>"+t+"</h6>"}},{match:/`{3}((.|\n|\r)*?)`{3}/gm,mapFunction:function(e,t){return"<pre>"+t+"</pre>"}},{match:/`{1}(.*?)`{1}/gm,mapFunction:function(e,t){return"<pre>"+t+"</pre>"}},{match:/[*_]{2}(.+)[*_]{2}/gm,mapFunction:function(e,t){return"<strong>"+t+"</strong>"}},{match:/[*_](.+)[*_]/gm,mapFunction:function(e,t){return"<em>"+t+"</em>"}},{match:/\s*-\s+\[ ]\s+/gm,mapFunction:function(){return'<br><input type="checkbox" disabled>'}},{match:/\s*-\s+\[x]\s+/gim,mapFunction:function(){return'<br><input type="checkbox" checked disabled>'}},{match:/~~(.+)~~/gm,mapFunction:function(e,t){return"<del>"+t+"</del>"}},{match:/!?\[(.+)]\(.+\)/gm,mapFunction:function(e,t,n){return'<a href="'+n+'">'+t+"</a>"}}],ignore:[{match:/^#.*$/gm,mapFunction:function(e){return'<span class="comment">'+e+"</span>"}}],sql:[{match:/--.*$/gm,mapFunction:function(e){return'<span class="comment">'+e+"</span>"}},{match:b(["SELECT","FROM","WHERE","JOIN","ORDER","BY","DISTINCT","GROUP","LEFT","RIGHT","INNER","OUTER","ON","AS","\\|\\|","&&","="],{prefix:"\\s",suffix:"\\s",flags:"gmi"}),color:"#ff0000"}],properties:[{match:/^((\w|\\ |)*)\s*=/gm,mapFunction:function(e,t){return'<span style="color: #ff0000">'+t+"</span> ="}},{match:/^((\w|\\ |)*)\s*:/gm,mapFunction:function(e,t){return'<span style="color: #ff0000">'+t+"</span> :"}},{match:/^[#!].*$/gm,mapFunction:function(e){return'<span class="comment">'+e+"</span>"}}]},x=function(){function e(){}return e.prototype.highlight=function(e,t){return function(e,t){var n=e;return t.keywords.forEach(function(e){n=n.replace(e.match,"function"==typeof e.mapFunction?e.mapFunction:function(t){return'<span style="color: '+e.color+'">'+t+"</span>"})}),n}(e,{keywords:y[t]})},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),w=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},P=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},M=function(){function e(e){this.textHighlightService=e}return e.prototype.processRaw=function(e){var t=new FileReader;return new Promise(function(n,o){t.onload=function(){return n({previewContent:t.result})},t.readAsText(e)})},e.prototype.processHighlightedText=function(e,t){var n=this,o=new FileReader;return new Promise(function(r,i){o.onload=function(){var e=n.textHighlightService.highlight(o.result,t).replace(/(\r\n|\n|\r)/gm,function(){return"<br/>"});r({previewContent:e})},o.readAsText(e)})},e.prototype.processJSON=function(e){var t=new FileReader;return new Promise(function(n,o){t.onload=function(){var e=document.createElement("pre");e.innerText=JSON.stringify(JSON.parse(t.result),null,4),e.style.padding="1rem",n({previewContent:[e]})},t.readAsText(e)})},e.prototype.processHTML=function(e){return w(this,void 0,void 0,function(){var t;return P(this,function(n){return t=new FileReader,[2,new Promise(function(n,o){t.onload=function(){var e=document.createElement("div");e.style.padding="1rem",e.attachShadow({mode:"open"}).innerHTML=t.result,n({previewContent:[e]})},t.readAsText(e)})]})})},e.prototype.processPDF=function(e){return w(this,void 0,void 0,function(){var t;return P(this,function(n){return(t=document.createElement("object")).data=URL.createObjectURL(e),t.style.width="100%",t.style.height="100%",[2,{previewContent:[t]}]})})},e.\u0275fac=function(t){return new(t||e)(c.Yb(x))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac}),e}(),k=function(){function e(){}return e.prototype.processVideo=function(e){var t=[];return new Promise(function(n,o){var r=document.createElement("video");r.src=URL.createObjectURL(e),r.style.width="100%",r.style.height="100%",r.controls=!0,r.onloadeddata=function(){t.push({key:"Video data",type:"divider"}),t.push({key:"Width",value:r.videoWidth+" px"}),t.push({key:"Height",value:r.videoHeight+" px"}),t.push({key:"Duration",value:r.duration+" s"}),t.push({key:"Text tracks",value:r.textTracks&&r.textTracks.length||0}),t.push({key:"Video tracks",value:r.getVideoTracks&&r.getVideoTracks().length||0}),t.push({key:"Audio tracks",value:r.getAudioTracks&&r.getAudioTracks().length||0}),n({infos:t,previewContent:[r]})}})},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),C=["previewBody"],O=["histograms"];function _(e,t){if(1&e&&(c.Sb(0),c.Pb(1,"hr"),c.Ub(2,"h4"),c.Ic(3),c.Tb(),c.Rb()),2&e){var n=c.gc().$implicit;c.Db(3),c.Jc(n.key)}}function F(e,t){if(1&e&&(c.Sb(0),c.Ub(1,"span"),c.Ic(2),c.Tb(),c.Ic(3,": "),c.Ub(4,"strong"),c.Ic(5),c.Tb(),c.Rb()),2&e){var n=c.gc().$implicit;c.Db(2),c.Jc(n.key),c.Db(3),c.Jc(n.value)}}function T(e,t){if(1&e&&(c.Ub(0,"div"),c.Sb(1,6),c.Gc(2,_,4,1,"ng-container",7),c.Gc(3,F,6,2,"ng-container",8),c.Rb(),c.Tb()),2&e){var n=t.$implicit;c.Db(1),c.mc("ngSwitch",n.type),c.Db(1),c.mc("ngSwitchCase","divider")}}var E=function(){function e(e,t,n,o,r){this.audioProcessorService=e,this.textProcessorService=t,this.mapProcessorService=n,this.videoProcessorService=o,this.imageProcessorService=r,this.reset=new c.o,this.infos=[]}return e.prototype.resetPreview=function(){this.reset.next(),this.previewBody.nativeElement.innerHTML="",this.histograms.nativeElement.innerHTML="",this.infos.splice(0,this.infos.length),this.uploadedFile=null,this.response=null},e.prototype.processServerResponse=function(e,t){var n;this.response=e,this.uploadedFile=t,(n=this.infos).push.apply(n,function(e){var t=[];return t.push({key:"Size",value:e.size+" bytes"}),t.push({key:"MimeType",value:e.extensionByMimeType}),t.push({key:"Encoding",value:e.encoding}),t.push({key:"Preview type",value:e.previewType}),t}(this.response)),this.showPreview(this.response.previewType,this.uploadedFile)},e.prototype.showFileProcessResult=function(e){return t=this,void 0,o=function(){var t,n,o,r;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:return[4,e];case 1:return"string"==typeof(t=i.sent()).previewContent?(this.previewBody.nativeElement.style.padding="1rem",this.previewBody.nativeElement.innerHTML=t.previewContent):(n=this.previewBody.nativeElement).append.apply(n,t.previewContent),"function"==typeof t.afterAddCallback&&t.afterAddCallback(),Array.isArray(t.infos)&&(o=this.infos).push.apply(o,t.infos),Array.isArray(t.histograms)&&(r=this.histograms.nativeElement).append.apply(r,t.histograms),[2]}})},new((n=void 0)||(n=Promise))(function(e,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function a(e){try{s(o.throw(e))}catch(t){r(t)}}function s(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n(function(e){e(o)})).then(i,a)}s((o=o.apply(t,[])).next())});var t,n,o},e.prototype.showPreview=function(e,t){var n=this,o=new FileReader;switch(e){case"image":this.showFileProcessResult(this.imageProcessorService.processImage(t));break;case"html":this.showFileProcessResult(this.textProcessorService.processHTML(t)).then(function(){n.showContentData(n.response.contentData)});break;case"map":this.showFileProcessResult(this.mapProcessorService.processMapFilePromise(t));break;case"pdf":this.showFileProcessResult(this.textProcessorService.processPDF(t));break;case"svg":this.showFileProcessResult(this.imageProcessorService.processSvg(t)).then(function(){n.showContentData(n.response.contentData)});break;case"audio":this.showFileProcessResult(this.audioProcessorService.processAudio(t));break;case"video":this.showFileProcessResult(this.videoProcessorService.processVideo(t));break;case"json":this.showFileProcessResult(this.textProcessorService.processJSON(t)).then(function(){n.showContentData(n.response.contentData,!0)});break;case"formatted":o.onload=function(){n.previewBody.nativeElement.style.padding="1rem",n.previewBody.nativeElement.innerHTML="<pre>"+o.result+"</pre>",n.showContentData(n.response.contentData)},o.readAsText(t);break;case"highlight":this.showFileProcessResult(this.textProcessorService.processHighlightedText(t,this.response.highlight)).then(function(){n.showContentData(n.response.contentData,!0)});break;default:this.showFileProcessResult(this.textProcessorService.processRaw(t))}},e.prototype.showContentData=function(e,t){void 0===t&&(t=!1),e&&(this.infos.push({key:"Content data",type:"divider"}),this.infos.push({key:"Rows",value:e.rows||0}),this.infos.push({key:"Empty rows",value:e.emptyRows||0}),t&&this.infos.push({key:"Comments",value:this.previewBody.nativeElement.querySelectorAll(".comment").length}))},e.\u0275fac=function(t){return new(t||e)(c.Ob(f),c.Ob(M),c.Ob(v),c.Ob(k),c.Ob(g))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-file-analyzer-preview"]],viewQuery:function(e,t){if(1&e&&(c.Mc(C,3),c.Mc(O,3)),2&e){var n=void 0;c.uc(n=c.dc())&&(t.previewBody=n.first),c.uc(n=c.dc())&&(t.histograms=n.first)}},outputs:{reset:"reset"},decls:13,vars:2,consts:[[1,"analyzer-button",3,"click"],[1,"content"],["previewBody",""],[4,"ngFor","ngForOf"],[1,"histograms"],["histograms",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(c.Ub(0,"section"),c.Ub(1,"header"),c.Ub(2,"h3"),c.Ic(3),c.Tb(),c.Ub(4,"button",0),c.cc("click",function(){return t.resetPreview()}),c.Ic(5,"Back to upload"),c.Tb(),c.Tb(),c.Ub(6,"main"),c.Pb(7,"div",1,2),c.Ub(9,"aside"),c.Gc(10,T,4,2,"div",3),c.Pb(11,"div",4,5),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Db(3),c.Jc(null==t.response?null:t.response.originalName),c.Db(7),c.mc("ngForOf",t.infos))},directives:[o.l,o.o,o.p,o.q],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(0deg,#4f6072,#8699aa);height:100vh;box-sizing:border-box;margin:0;padding:0}main[_ngcontent-%COMP%]{height:100%}.dialog[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{overflow:hidden;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.2);max-height:calc(100vh - 4rem - 64px);max-width:calc(100vw - 4rem)}#filePreview[_ngcontent-%COMP%], #fileUpload[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:100%;font-family:Roboto,sans-serif}section[_ngcontent-%COMP%]{min-width:min(calc(100vw - 4rem),1000px);-ms-flex-direction:column;flex-direction:column;min-height:calc(100vh - 4rem - 64px)}section[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:1rem;position:relative;color:#fff;background:#4db6ac;box-shadow:0 2px 5px rgba(0,0,0,.2);-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{word-break:break-all}section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{background:#fff;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;overflow:hidden}section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow:auto;-ms-flex-positive:1;flex-grow:1}section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{color:#fff;overflow-y:auto;padding:1rem;-ms-flex-preferred-size:200px;flex-basis:200px;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:1;flex-grow:1;max-width:250px;background:#4db6ac}@media only screen and (max-width:726px){section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;overflow-y:auto}section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow:visible}section[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{overflow-y:visible;max-width:-webkit-max-content;max-width:-moz-max-content;max-width:max-content;box-shadow:0 2px 5px rgba(0,0,0,.2)}}.analyzer-button[_ngcontent-%COMP%]{outline:none;left:0;right:0;bottom:20px;border:1px solid #fff;color:#fff;background:transparent;padding:8px 7px;font-size:12px;border-radius:4px;font-family:Roboto;line-height:1;cursor:pointer;-ms-flex-preferred-size:100px;flex-basis:100px}.analyzer-button[_ngcontent-%COMP%]:hover{background:#fff;color:#4db6ac}"],changeDetection:0}),e}(),S=n("M1lw"),D=["fileInput"],R=["dropArea"],A=function(){function e(){this.fileUploaded=new c.o,this.response=new c.o,this.progress=-1}return e.prototype.ngOnInit=function(){this.initDragAndDrop(),this.initInputFile()},e.prototype.initDragAndDrop=function(){var e=this;this.dropArea.nativeElement.addEventListener("dragover",function(e){e.preventDefault()}),this.dropArea.nativeElement.addEventListener("dragenter",function(t){e.dropArea.nativeElement.classList.add("drag-over"),t.preventDefault()});var t=function(){e.dropArea.nativeElement.classList.remove("drag-over")};this.dropArea.nativeElement.addEventListener("dragleave",t),this.dropArea.nativeElement.addEventListener("dragend",t),this.dropArea.nativeElement.addEventListener("drop",function(t){if(e.dropArea.nativeElement.classList.remove("drag-over"),!(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length))throw new Error("Cannot upload file from event: "+t);e.onFileUpload(t.dataTransfer.files[0]),t.preventDefault()})},e.prototype.initInputFile=function(){var e=this;this.fileInput.nativeElement.addEventListener("change",function(){if(!e.fileInput.nativeElement.files||!e.fileInput.nativeElement.files.length)throw new Error("Cannot read files using button");e.onFileUpload(e.fileInput.nativeElement.files[0])})},e.prototype.showUpload=function(e){this.fileInput.nativeElement.click(),e.preventDefault()},e.prototype.onFileUpload=function(e){var t,n,o,r,i,a,s,c,l,u,p,f,d=this,h=new FormData;h.append("file",e),this.progress=0,o=void 0===(n=(t={content:h,method:"POST",url:S.a.BASE_URL+"/poc/analyze/file",onProgress:function(e){d.progress=e.loaded/e.total*100,console.log("Progress",d.progress),100===d.progress&&d.fileUploaded.next()},onResponse:function(t){d.progress=-1,d.response.next({file:e,response:JSON.parse(t)})}}).method)?"GET":n,r=t.url,a=void 0===(i=t.onResponse)?function(e){}:i,s=t.content,l=void 0===(c=t.headers)?{}:c,p=void 0===(u=t.onProgress)?function(){}:u,(f=new XMLHttpRequest).onreadystatechange=function(){console.log(f.readyState,f.status),4!==f.readyState||200!==f.status&&201!==f.status||a(f.responseText)},f.upload.onprogress=p,f.open(o,r,!0),Object.entries(l).forEach(function(e){return f.setRequestHeader(e[0],e[1])}),f.send(s)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Ib({type:e,selectors:[["app-file-analyzer-upload"]],viewQuery:function(e,t){if(1&e&&(c.Mc(D,3),c.Mc(R,3)),2&e){var n=void 0;c.uc(n=c.dc())&&(t.fileInput=n.first),c.uc(n=c.dc())&&(t.dropArea=n.first)}},outputs:{fileUploaded:"fileUploaded",response:"response"},decls:23,vars:2,consts:[["aria-hidden","true",1,"fa","fa-cloud-upload"],[1,"up"],[1,"load"],[1,"body"],["dropArea",""],["type","file",2,"display","none"],["fileInput",""],["data-progress","23",1,"loading"],["aria-hidden","true",1,"fa","fa-file-text-o","pointer-none"],[1,"pointer-none"],["href","","id","triggerFile",3,"click"]],template:function(e,t){1&e&&(c.Ub(0,"section"),c.Ub(1,"header"),c.Ub(2,"p"),c.Pb(3,"i",0),c.Ub(4,"span",1),c.Ic(5,"File"),c.Tb(),c.Ub(6,"span",2),c.Ic(7,"Analyzer"),c.Tb(),c.Tb(),c.Tb(),c.Ub(8,"div",3,4),c.Pb(10,"input",5,6),c.Pb(12,"div",7),c.Pb(13,"i",8),c.Ub(14,"p",9),c.Ub(15,"strong"),c.Ic(16,"Drag and drop"),c.Tb(),c.Ic(17," files here "),c.Pb(18,"br"),c.Ic(19," or "),c.Ub(20,"a",10),c.cc("click",function(e){return t.showUpload(e)}),c.Ic(21,"browse"),c.Tb(),c.Ic(22," to begin the upload "),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Db(12),c.Dc("width",t.progress,"%"))},styles:["body[_ngcontent-%COMP%]{background:linear-gradient(0deg,#4f6072,#8699aa);height:100vh;box-sizing:border-box;margin:0;padding:0}main[_ngcontent-%COMP%]{height:100%}.dialog[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{overflow:hidden;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.2);max-height:calc(100vh - 4rem - 64px);max-width:calc(100vw - 4rem)}#filePreview[_ngcontent-%COMP%], #fileUpload[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:100%;font-family:Roboto,sans-serif}section[_ngcontent-%COMP%]{min-width:min(calc(100vw - 4rem),600px)}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:3rem;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;background:#4db6ac;text-align:center}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:40px;margin:0;-ms-flex-align:baseline;align-items:baseline}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;-webkit-animation:fadeup .5s ease 1s both;animation:fadeup .5s ease 1s both}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]{font-weight:700;display:inline-block;margin-right:.5rem;-webkit-animation:faderight .5s ease 1.5s both;animation:faderight .5s ease 1.5s both}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{display:inline-block;font-weight:100;margin-left:-8px;-webkit-animation:faderight 1s ease 1.5s both;animation:faderight 1s ease 1.5s both}section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding:1rem 3rem;background:#fff;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;position:relative}section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;transition:width .1s;top:0;height:2px;background:#000}section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:65px;color:#d3d3d3}section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding-top:15px;line-height:1.4}section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#4db6ac}section[_ngcontent-%COMP%]   .body.drag-over[_ngcontent-%COMP%]{border:2px dashed #4db6ac}section[_ngcontent-%COMP%]   .body.drag-over[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{box-shadow:0 0 0 -3px #fff,0 0 0 #d3d3d3,0 0 0 -3px #fff,0 0 0 #d3d3d3;-webkit-animation:file .5s ease both;animation:file .5s ease both}@-webkit-keyframes file{50%{box-shadow:-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3,-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3}75%,to{box-shadow:-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3,-16px 16px 0 -3px #fff,-16px 16px 0 #d3d3d3}}@keyframes file{50%{box-shadow:-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3,-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3}75%,to{box-shadow:-8px 8px 0 -3px #fff,-8px 8px 0 #d3d3d3,-16px 16px 0 -3px #fff,-16px 16px 0 #d3d3d3}}section[_ngcontent-%COMP%]   .body.drag-over[_ngcontent-%COMP%]   .pointer-none[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),e}(),U=[{path:"",children:[{path:"",component:function(){function e(){this.uploadDisplay="flex",this.previewDisplay="none"}return Object.defineProperty(e.prototype,"uploaded",{set:function(e){e?(this.uploadDisplay="none",this.previewDisplay="flex"):(this.uploadDisplay="flex",this.previewDisplay="none")},enumerable:!1,configurable:!0}),e.prototype.onFileResponse=function(e){this.uploaded=!0,this.fileAnalyzerPreview.processServerResponse(e.response,e.file)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Ib({type:e,selectors:[["app-file-analyzer"]],viewQuery:function(e,t){var n;1&e&&c.Mc(E,3),2&e&&c.uc(n=c.dc())&&(t.fileAnalyzerPreview=n.first)},decls:5,vars:4,consts:[["id","fileUpload"],[3,"fileUploaded","response"],["id","filePreview"],[3,"reset"]],template:function(e,t){1&e&&(c.Ub(0,"main"),c.Ub(1,"article",0),c.Ub(2,"app-file-analyzer-upload",1),c.cc("fileUploaded",function(){return t.uploaded=!0})("response",function(e){return t.onFileResponse(e)}),c.Tb(),c.Tb(),c.Ub(3,"article",2),c.Ub(4,"app-file-analyzer-preview",3),c.cc("reset",function(){return t.uploaded=!1}),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Db(1),c.Dc("display",t.uploadDisplay),c.Db(2),c.Dc("display",t.previewDisplay))},directives:[A,E],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(0deg,#4f6072,#8699aa);height:100vh;box-sizing:border-box;margin:0;padding:0}main[_ngcontent-%COMP%]{height:100%}.dialog[_ngcontent-%COMP%]{overflow:hidden;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.2);max-height:calc(100vh - 4rem - 64px);max-width:calc(100vw - 4rem)}#filePreview[_ngcontent-%COMP%], #fileUpload[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:100%;font-family:Roboto,sans-serif}"],changeDetection:0}),e}()}]}],I=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({imports:[[s.k.forChild(U)],s.k]}),e}(),L=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({providers:[f,g,v,M,k,p,x],imports:[[a.a,i.a,I,o.c,r.j,r.s]]}),e}()}}]);