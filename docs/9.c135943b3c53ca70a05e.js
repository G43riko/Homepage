(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ZJtR:function(e,n,t){"use strict";t.r(n);var c=t("Valr"),o=t("TYT/"),i=t("IYfF"),a=t("3S9H"),r=t("Y5dU"),l=t("Ktk3"),s=[1,"image-container"],p=["class","image-holder",4,"ngFor","ngForOf"],u=[1,"image-holder"],g=[1,"wrapper"],d=["alt","",3,"src"],f=[1,"info"],h=[1,"title"],m=["href","https://unsplash.com/photos/zshyCr6HGw0","rel","noopener","target","_blank"],b=[1,"created"];function v(e,n){if(1&e&&(o.ec(0,"figure",u),o.ec(1,"div",g),o.Yb(2,"img",d),o.qc(3,"async"),o.ec(4,"div",f),o.ec(5,"span",h),o.ec(6,"a",m),o.Rc(7,"Lake Walchen"),o.cc(),o.cc(),o.ec(8,"span",b),o.Rc(9," 12.11.1993 "),o.cc(),o.cc(),o.cc(),o.cc()),2&e){var t=n.$implicit;o.Hc(2),o.vc("src",o.rc(3,1,t),o.Gc)}}var y=function(){function e(e,n){this.storage=e,this.authService=n,this.onNumberChange=new o.t}return e.prototype.ngOnInit=function(){var e=this;this.authService.user$.subscribe(function(n){n&&e.loadData(n)})},e.prototype.loadData=function(e){var n=this;this.storage.storage.ref("images/"+this.type+"/"+e.uid+"/").listAll().then(function(e){n.onNumberChange.emit(e.items.length),n.files=e.items.map(function(e){return Object(r.a)(e.getDownloadURL())})})},e.ngComponentDef=o.Rb({type:e,selectors:[["app-my-files"]],factory:function(n){return new(n||e)(o.Xb(l.a),o.Xb(i.a))},inputs:{type:"type"},outputs:{onNumberChange:"onNumberChange"},consts:2,vars:1,template:function(e,n){1&e&&(o.ec(0,"div",s),o.Pc(1,v,10,3,"figure",p),o.cc()),2&e&&(o.Hc(1),o.vc("ngForOf",n.files))},directives:[c.j],pipes:[c.b],styles:[".image-container[_ngcontent-%COMP%]{position:relative;-moz-column-count:4;column-count:4;-moz-column-gap:0;column-gap:0}@media only screen and (max-width:1023px){.image-container[_ngcontent-%COMP%]{-moz-column-count:3;column-count:3}}@media only screen and (max-width:767px){.image-container[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}}@media only screen and (max-width:320px){.image-container[_ngcontent-%COMP%]{-moz-column-count:1;column-count:1}}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:0;overflow:hidden;border-radius:5px;padding:5px;width:100%}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:5px;box-sizing:border-box}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:100%;-webkit-filter:grayscale(0);filter:grayscale(0);transition:-webkit-filter .3s;transition:filter .3s;transition:filter .3s,-webkit-filter .3s;border-radius:5px;overflow:hidden}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);position:absolute;width:100%;height:0;transition:height .3s;line-height:40px;border-radius:0 0 5px 5px;padding:0 10px;box-sizing:border-box;bottom:5px;overflow:hidden}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .created[_ngcontent-%COMP%]{float:right;color:#fff}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:hover   .info[_ngcontent-%COMP%]{height:40px}.image-container[_ngcontent-%COMP%]   figure.image-holder[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{-webkit-filter:grayscale(100%);filter:grayscale(100%)}"]}),e}(),C=t("YfVx"),w=t("Qo+n"),_=t("jjfr"),x=t("QJY3"),P=t("2WpN"),O=t("/yY+"),M=t("aR35"),k=function(){function e(e,n,t){this.ref=e,this.ownedImageTask=n,this.sharedImageTask=t}return Object.defineProperty(e.prototype,"percentageChanges",{get:function(){return this.ownedImageTask.percentageChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshotChanges",{get:function(){return this.ownedImageTask.snapshotChanges()},enumerable:!0,configurable:!0}),e}(),I=function(){function e(e,n){this.storage=e,this.authService=n}return e.prototype.checkFileFormat=function(e){if("image"!==e.type.split("/")[0])throw new Error("Unsupported file format")},e.prototype.getCustomMetadata=function(e,n){return{sharedWith:n,app:M.a.TITLE,uploadedBy:e.uid,active:"true"}},e.prototype.getUniqueFileNameFromFile=function(e){return(new Date).getTime()+"_"+e.name},e.prototype.uploadFile=function(e,n,t){this.checkFileFormat(e);var c,o=this.getUniqueFileNameFromFile(e),i="images/owned/"+n.uid+"/"+o,a=this.getCustomMetadata(n,t);return t&&(c=this.storage.upload("images/shared/"+t+"/"+o,e,{customMetadata:a})),new k(this.storage.ref(i),this.storage.upload(i,e,{customMetadata:a}),c)},e.ngInjectableDef=o.Tb({token:e,factory:function(n){return new(n||e)(o.ic(l.a),o.ic(i.a))},providedIn:"root"}),e}(),F=t("CgSc"),D=t("xtoW"),S=t("M+/Y"),H=t("pENn"),R=t("P11e"),U=t("qWDx"),z=t("FgbW"),N=t("S8bm"),T=t("O3+J"),B=[4,"ngIf"],j=[1,"share-options-wrapper",2,"margin-bottom","1em"],W=[1,"share-enable",3,"ngModel","ngModelChange"],Y=["class","full-width share-autocomplete",4,"ngIf"],q=["appDropZone","",1,"box_input",3,"ngClass","dropped","hovered","click"],A=["height","43","viewBox","0 0 50 43","width","50","xmlns","http://www.w3.org/2000/svg",1,"box_icon"],E=["d","M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"],L=["id","file_input","multiple","","type","file",1,"box_file",3,"change"],Z=["file_input",""],X=[1,"label"],$=[3,"ngIfElse","ngIf"],J=["isEmpty",""],Q=[1,"box_button",3,"disabled","click"],V=["upload_button",""],G=[1,"full-width","share-autocomplete"],K=["aria-label","State","matInput","","placeholder","Zdiela\u0165 s",3,"formControl","matAutocomplete"],ee=[3,"displayWith"],ne=["auto","matAutocomplete"],te=[3,"disabled","value",4,"ngFor","ngForOf"],ce=[3,"disabled","value"],oe=["aria-hidden","",1,"example-option-img",3,"src"];function ie(e,n){if(1&e&&(o.ec(0,"mat-option",ce),o.Yb(1,"img",oe),o.ec(2,"span"),o.Rc(3),o.cc(),o.Rc(4," \xa0 &nbsp "),o.ec(5,"small"),o.Rc(6),o.cc(),o.cc()),2&e){var t=n.$implicit,c=o.pc(2).ngIf;o.vc("disabled",c.uid===t.uid)("value",t),o.Hc(1),o.vc("src",t.photoURL,o.Gc),o.Hc(3),o.Sc(t.displayName),o.Hc(6),o.Sc(t.email)}}function ae(e,n){if(1&e&&(o.ec(0,"mat-form-field",G),o.Yb(1,"input",K),o.ec(2,"mat-autocomplete",ee,ne),o.Pc(4,ie,7,5,"mat-option",te),o.qc(5,"async"),o.cc(),o.cc()),2&e){var t=o.Bc(3),c=o.pc(2);o.Hc(1),o.vc("formControl",c.shareWith)("matAutocomplete",t),o.Hc(2),o.vc("displayWith",c.mapper),o.Hc(4),o.vc("ngForOf",o.rc(5,4,c.accounts))}}function re(e,n){}var le=[4,"ngFor","ngForOf"];function se(e,n){if(1&e&&(o.ec(0,"div"),o.Rc(1),o.cc()),2&e){var t=n.$implicit;o.Hc(1),o.Sc(t.name)}}function pe(e,n){if(1&e&&o.Pc(0,se,2,1,"div",le),2&e){var t=o.pc(2);o.vc("ngForOf",t.files)}}var ue=[1,"box__dragndrop"];function ge(e,n){1&e&&(o.ec(0,"strong"),o.Rc(1,"Choose a file"),o.cc(),o.ec(2,"span",ue),o.Rc(3," or drag it here"),o.cc(),o.Rc(4,". "))}var de=["class","progress-wrapper",3,"ngStyle",4,"ngIf"],fe=[1,"progress-wrapper",3,"ngStyle"],he=[1,"progress"],me=["mode","determinate",3,"value"],be=function(e){return{display:e}};function ve(e,n){if(1&e&&(o.ec(0,"div",fe),o.ec(1,"span",he),o.Rc(2),o.qc(3,"g43fileSize"),o.qc(4,"g43fileSize"),o.cc(),o.Yb(5,"mat-progress-bar",me),o.cc()),2&e){var t=n.ngIf,c=o.pc().ngIf,i=o.pc(2);o.vc("ngStyle",o.yc(8,be,i.isActive(c)?"block":"none")),o.Hc(2),o.Uc("",o.rc(3,4,c.bytesTransferred)," of ",o.rc(4,6,c.totalBytes),""),o.Hc(5),o.vc("value",t)}}function ye(e,n){if(1&e&&(o.ec(0,"div"),o.Pc(1,ve,6,10,"div",de),o.qc(2,"async"),o.cc()),2&e){var t=o.pc(2);o.Hc(1),o.vc("ngIf",o.rc(2,1,t.percentage))}}var Ce=function(e){return{"is-dragover":e}};function we(e,n){if(1&e){var t=o.fc();o.ec(0,"div"),o.ec(1,"div",j),o.ec(2,"mat-slide-toggle",W),o.kc("ngModelChange",function(e){return o.Dc(t),o.pc().shared=e}),o.Rc(3,"Zdiela\u0165"),o.cc(),o.Pc(4,ae,6,6,"mat-form-field",Y),o.cc(),o.ec(5,"div",q),o.kc("dropped",function(e){return o.Dc(t),o.pc().files=e}),o.kc("hovered",function(e){return o.Dc(t),o.pc().isHovering=e}),o.kc("click",function(e){o.Dc(t);var n=o.Bc(9),c=o.Bc(16);return o.pc().checkClick(e,n,c)}),o.oc(),o.ec(6,"svg",A),o.Yb(7,"path",E),o.cc(),o.nc(),o.ec(8,"input",L,Z),o.kc("change",function(e){o.Dc(t);var n=o.Bc(9);return o.pc().files=n.files}),o.cc(),o.ec(10,"span",X),o.Pc(11,re,0,0,"ng-template"),o.Pc(12,pe,1,1,"ng-template",$),o.Pc(13,ge,5,0,"ng-template",null,J,o.Qc),o.cc(),o.ec(15,"button",Q,V),o.Nc(),o.kc("click",function(e){o.Dc(t);var c=n.ngIf,i=o.pc();return i.files.length&&i.startUpload(i.files,c)}),o.Rc(17,"Upload "),o.cc(),o.Pc(18,ye,3,3,"div",B),o.qc(19,"async"),o.cc(),o.cc()}if(2&e){var c=o.Bc(14),i=o.pc();o.Hc(2),o.vc("ngModel",i.shared),o.Hc(4),o.vc("ngIf",i.shared),o.Hc(5),o.vc("ngClass",o.yc(10,Ce,i.isHovering)),o.Hc(12),o.vc("ngIfElse",c)("ngIf",i.files.length>0),o.Hc(15),o.Nb("disabled",0==i.files.length),o.Oc(),o.vc("disabled",0==i.files.length),o.Hc(18),o.vc("ngIf",o.rc(19,8,i.snapshot))}}var _e={length:0,item:function(e){return null}},xe=function(){function e(e,n,t,c){this.authService=e,this.snackBar=n,this.analyticsService=t,this.fileUploadService=c,this.uploadTasks=[],this.files=_e,this.onFileUploaded=new o.t,this.shareWith=new x.e,this.mapper=function(e){return e?e.displayName:null}}return e.prototype.ngOnInit=function(){this.accounts=this.authService.getAccounts()},e.prototype.startUpload=function(e,n){for(var t=this,c=this.shared&&this.shareWith.value?this.shareWith.value.uid:null,o=function(o){var a=e.item(o);if(!a)return"continue";i.analyticsService.eventUploadFile(a.name);try{var r=i.fileUploadService.uploadFile(a,n,c),l=i.uploadTasks.length;i.uploadTasks.push(r),i.percentage=r.percentageChanges,i.snapshot=r.snapshotChanges.pipe(Object(P.a)(function(){t.downloadUrl=r.ref.getDownloadURL(),t.files=_e,t.onFileUploaded.emit(n),t.snackBar.open("S\xfabor bol \xfaspe\u0161ne nahrat\xfd","Zavrie\u0165"),t.uploadTasks.splice(l,1)}))}catch(s){i.snackBar.open("Pri uploade nastala chyba: "+s,"Zavrie\u0165")}},i=this,a=0;a<e.length;a++)o(a)},e.prototype.isActive=function(e){return"running"===e.state&&e.bytesTransferred<e.totalBytes},e.prototype.checkClick=function(e,n,t){e.target!==t&&n.click()},e.ngComponentDef=o.Rb({type:e,selectors:[["app-file-upload"]],factory:function(n){return new(n||e)(o.Xb(i.a),o.Xb(F.b),o.Xb(O.a),o.Xb(I))},outputs:{onFileUploaded:"onFileUploaded"},consts:2,vars:3,template:function(e,n){1&e&&(o.Pc(0,we,20,12,"div",B),o.qc(1,"async")),2&e&&o.vc("ngIf",o.rc(1,1,n.authService.user$))},directives:[c.k,D.a,x.n,x.q,U.a,c.i,z.b,S.b,x.c,H.c,x.f,H.a,c.j,N.o,c.l,R.a],pipes:[c.b,T.a],styles:[".share-options-wrapper[_ngcontent-%COMP%]{padding:1em;box-sizing:border-box;height:4em}.share-options-wrapper[_ngcontent-%COMP%]   .share-enable[_ngcontent-%COMP%]{display:inline-block;margin:1em}.share-options-wrapper[_ngcontent-%COMP%]   .share-autocomplete[_ngcontent-%COMP%]{display:inline-block;width:calc(70% - 3em)}.example-option-img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;top:6px;margin-right:8px;position:relative}.box_input[_ngcontent-%COMP%]{outline:#92b0b3 dashed 2px;outline-offset:-10px;background-color:#c8dadf;font-size:1.25rem;position:relative;text-align:center;padding:20px;display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-align:center;align-items:center;height:420px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.box_input.is-dragover[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}.box_input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.box_input[_ngcontent-%COMP%]   .box_icon[_ngcontent-%COMP%]{width:100%;height:80px;fill:#92b0b3;display:block;margin-bottom:40px}.box_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden}.box_input[_ngcontent-%COMP%]   .progress-wrapper[_ngcontent-%COMP%]{width:100%}.box_input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#39bfd3;font-weight:700;color:#e5edf1;display:block;padding:8px 16px;width:100px;border:none;cursor:pointer}.box_input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0f3c4b}.box_input[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background-color:#92b0b3;cursor:not-allowed}@media only screen and (max-height:556px){.box_input[_ngcontent-%COMP%]{height:calc(100vh - 136px - 4em)}.box_input[_ngcontent-%COMP%]   .box_icon[_ngcontent-%COMP%]{margin-bottom:10px}}"]}),e}(),Pe=["class","container",4,"ngIf"],Oe=[1,"container"],Me=["label","Nahra\u0165 obr\xe1zok",4,"ngIf"],ke=["label","Nahrat\xe9 obr\xe1zky"],Ie=["mat-tab-label",""],Fe=[3,"type","onNumberChange"],De=["label","Zdielan\xe9 so mnou"],Se=["label","Nahra\u0165 obr\xe1zok"],He=["matTabContent",""],Re=[3,"onFileUploaded"];function Ue(e,n){if(1&e){var t=o.fc();o.ec(0,"app-file-upload",Re),o.kc("onFileUploaded",function(e){return o.Dc(t),o.pc(3).uploadComplete(e)}),o.cc()}}function ze(e,n){1&e&&(o.ec(0,"mat-tab",Se),o.Pc(1,Ue,1,0,"ng-template",He),o.cc())}var Ne=["matBadgeOverlap","false",3,"matBadge"];function Te(e,n){if(1&e&&(o.ec(0,"span",Ne),o.Rc(1,"Nahrat\xe9 obr\xe1zky"),o.cc()),2&e){var t=o.pc(2);o.wc("matBadge",t.owned)}}function Be(e,n){if(1&e&&(o.ec(0,"span",Ne),o.Rc(1,"Zdielan\xe9 so mnou"),o.cc()),2&e){var t=o.pc(2);o.wc("matBadge",t.shared)}}function je(e,n){if(1&e){var t=o.fc();o.ec(0,"div",Oe),o.ec(1,"mat-tab-group"),o.Pc(2,ze,2,0,"mat-tab",Me),o.ec(3,"mat-tab",ke),o.Pc(4,Te,2,1,"ng-template",Ie),o.ec(5,"app-my-files",Fe),o.kc("onNumberChange",function(e){return o.Dc(t),o.pc().owned=e}),o.cc(),o.cc(),o.ec(6,"mat-tab",De),o.Pc(7,Be,2,1,"ng-template",Ie),o.ec(8,"app-my-files",Fe),o.kc("onNumberChange",function(e){return o.Dc(t),o.pc().shared=e}),o.cc(),o.cc(),o.cc(),o.cc()}if(2&e){var c=n.ngIf,i=o.pc();o.Hc(2),o.vc("ngIf",i.authService.checkAuthorization(c,i.Roles.ROLE_UPLOAD_FILES)),o.Hc(5),o.vc("type","owned"),o.Hc(8),o.vc("type","shared")}}var We=function(){function e(e){this.authService=e,this.owned=0,this.shared=0,this.Roles=a.a}return e.prototype.ngOnInit=function(){},e.prototype.uploadComplete=function(e){this.children.forEach(function(n){return n.loadData(e)})},e.ngComponentDef=o.Rb({type:e,selectors:[["app-file-list"]],factory:function(n){return new(n||e)(o.Xb(i.a))},viewQuery:function(e,n){var t;1&e&&o.Wc(y,!0),2&e&&o.Ac(t=o.mc())&&(n.children=t)},consts:3,vars:3,template:function(e,n){1&e&&(o.ec(0,"mat-card"),o.Pc(1,je,9,3,"div",Pe),o.qc(2,"async"),o.cc()),2&e&&(o.Hc(1),o.vc("ngIf",o.rc(2,1,n.authService.user$)))},directives:[C.a,c.k,w.c,w.a,w.d,y,w.b,xe,_.a],pipes:[c.b],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;width:1024px}@media only screen and (max-width:1023px){.container[_ngcontent-%COMP%]{width:100%}}"]}),e}(),Ye=t("DUip"),qe=[{path:"",children:[{path:"",pathMatch:"full",component:We}]}],Ae=function(){function e(){}return e.ngModuleDef=o.Vb({type:e}),e.ngInjectorDef=o.Ub({factory:function(n){return new(n||e)},imports:[[Ye.k.forChild(qe)],Ye.k]}),e}();Ye.k.forChild(qe);var Ee=t("mnDI"),Le=t("NA4g"),Ze=t("aYsj");t.d(n,"FilesModule",function(){return Xe});var Xe=function(){function e(){}return e.ngModuleDef=o.Vb({type:e}),e.ngInjectorDef=o.Ub({factory:function(n){return new(n||e)},imports:[[Ee.a,Ze.a,Le.a,Ae,c.c,x.j,x.t]]}),e}()}}]);